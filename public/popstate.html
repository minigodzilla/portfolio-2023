<!DOCTYPE html>
<html>

<head>
    <title>One-Page Website</title>
    <style>
        .page {
            display: none;
        }
    </style>
</head>

<body>
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <div id="content">
        <div id="home" class="page">
            <h1>Welcome to the Home Page</h1>
            <p>This is the content of the Home Page.</p>
        </div>

        <div id="about" class="page">
            <h1>About Us</h1>
            <p>This is the content of the About Us Page.</p>
        </div>

        <div id="services" class="page">
            <h1>Our Services</h1>
            <p>This is the content of the Services Page.</p>
        </div>

        <div id="contact" class="page">
            <h1>Contact Us</h1>
            <p>This is the content of the Contact Us Page.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let pageId = {};
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('nav a');
            let userClicked = false;

            function showPage(pageId) {
                console.log('showPage');
                pages.forEach(function (page) {
                    if (page.id === pageId) {
                        page.style.display = 'block';
                    } else {
                        page.style.display = 'none';
                    }
                });
            }

            function handleHashChange() {
                pageId = window.location.hash.slice(1);
                console.log('Hash changed:', pageId);

                // replace address bar URL
                const nextURL = "/" + pageId;
                const nextTitle = "";
                const nextState = {};

                window.history.replaceState(nextState, nextTitle, nextURL);
                showPage(pageId);
            }

            function handlePopstate(event) {
                pageId = window.location.pathname.slice(1);
                console.log('Pop state changed:', pageId);
                if (!userClicked) showPage(pageId);
                userClicked = false;
            }

            navLinks.forEach(function (navLink) {
                navLink.addEventListener('click', function (event) {
                    event.preventDefault();
                    userClicked = true;
                    const pageId = this.getAttribute('href').slice(1);
                    window.location.hash = pageId;
                });
            });

            window.addEventListener('hashchange', () => {
                handleHashChange();
            });
            window.addEventListener('popstate', () => {
                handlePopstate();
            });

            // Initial page display
            const initialPageId = window.location.hash.slice(1) || 'home';
            showPage(initialPageId);
        });
    </script>
</body>

</html>